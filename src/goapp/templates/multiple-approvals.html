{{ define "content" }}
<div id="pageTitle">Approve Multiple Requests</div>

<div class="flex flex-row h-[calc(100vh-13rem)]">
    <div class="flex flex-col w-1/2 border-1 border-red-500 p-1">
        <div class="border-1 shrink">
            <h1 class="text-xl font-semibold text-gray-500">Pending Requests</h1>
        </div>
        <div class="border-1 pt-3">
            <nav class="grid grid-cols-2" aria-label="header">
                <div class="sm:block px-1">
                    <div class="content-start">
                        <label for="filter" class="block text-sm font-medium text-gray-700">Filter by Request Type</label>
                        <select @change="" id="reponseType" name="responseType" class="w-full block mt-1 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                            <option>Select Request Type</option>
                        </select>
                    </div>
                </div>
                <div class="sm:block px-1">
                    <div class="content-start">
                        <label for="filter" class="block text-sm font-medium text-gray-700">Filter by Organization</label>
                        <select @change="" id="reponseType" name="responseType" class="w-full block mt-1 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                            <option>Select Organization</option>
                        </select>
                    </div>
                </div>
            </nav>
        </div>
        <div class="border-1 ml-1 mt-3">
            <div class="relative flex items-start">
                <div class="flex h-6 items-center">
                    <input id="select" name="select" type="checkbox"
                        class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded">
                </div>
                <div class="ml-1 text-sm/6">
                    <label for="select" class="text-sm font-medium text-gray-700">Select/Unselect All</label>
                </div>
            </div>
        </div>
        <div class="border mx-1 grow rounded-md overflow-y-auto">
            <ul role="list" class="divide-y divide-gray-300">
                <template x-for="i in 15">
                    <li class="cursor-pointer">
                        <div class="hover:bg-gray-50">
                            <div class="group flex flex-row">
                                <div class="flex items-center justify-center">
                                    <div class="hidden group-hover:block pl-5 pr-2">
                                        <input id="select" name="select" type="checkbox"
                        class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded">
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="flex items-center justify-between">
                                        <div class="grow">
                                            <div class="items-center justify-between">
                                                <p class="text-sm font-medium text-gray-800 truncate">New GitHub Copilot License Request</p>
                                            </div>
                                            <div class="grid grid-flow-row grid-cols-2 grid-rows-2 text-xs text-gray-500">
                                                <div><p class="truncate">Application: GH Management Tool</p></div>
                                                <div class="pl-3"><p class="truncate">Module: GitHubCopilot</p></div>
                                                <div><p class="truncate">Request by: juan.dela.cruz@email.com</p></div>
                                                <div class="pl-3"><p class="truncate">Requested on Dec 12, 2012, 12:12 PM</p></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </template>
                <!-- PAGINATION -->
                <li>
                    <div class="relative text-center my-5">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-b border-gray-300"></div>
                        </div>
                        <span class="relative p-3 bg-white">
                            <!-- LOAD MORE -->
                            <button class="hidden bg-[#FF5800] hover:bg-[#FF4300] text-white text-sm font-bold px-3 py-1 rounded">
                                Load More
                            </button>
                            <!-- LAST PAGE -->
                            <span class="hidden text-sm font-medium text-gray-500">
                                End Here
                            </span>
                            <!-- LOADING -->
                            <span class="relative flex flex-col justify-center items-center">
                                <svg role="status" class="w-12 h-12 text-gray-200 animate-spin dark:text-gray-600 fill-[#FF5800] bg-white rounded-full p-2" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor" />
                                    <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill" />
                                </svg>
                            </span>
                        </span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="flex flex-col w-1/2 border-1 border-blue-500 p-1">
        <div class="border-1">
            <h1 class="text-xl font-semibold text-gray-500">Selected Requests</h1>
        </div>
        <div class="border m-1 mt-3 grow rounded-md overflow-y-auto">
            <ul role="list" class="divide-y divide-gray-300">
                <template x-for="i in 3">
                    <li class="cursor-pointer p-3">
                        <div class="hover:bg-gray-50">
                            <div class="flex items-center justify-between">
                                <div class="grow">
                                    <div class="items-center justify-between">
                                        <p class="text-sm font-medium text-gray-800 truncate">New GitHub Copilot License Request</p>
                                    </div>
                                    <div class="grid grid-flow-row grid-cols-2 grid-rows-2 text-xs text-sm text-gray-500">
                                        <div><p class="truncate">Application: GH Management Tool</p></div>
                                        <div class="pl-3"><p class="truncate">Module: GitHubCopilot</p></div>
                                        <div><p class="truncate">Request by: juan.dela.cruz@email.com</p></div>
                                        <div class="pl-3"><p class="truncate">Requested on Dec 12, 2012, 12:12 PM</p></div>
                                    </div>
                                </div>
                            </div>
                            <div class="relative">
                                <div class="absolute flex flex-col right-1 bottom-10">
                                    <button class="group text-center text-sm font-semibold text-gray-400" title="Remove">
                                        <!-- DEFAULT REMOVE ICON (OUTLINE) -->
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 group-hover:hidden">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                                        </svg>                                          
                                        <!-- HOVERED REMOVE ICON (SOLID) -->
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 hidden group-hover:block">
                                            <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                                        </svg>                                                                                            
                                    </button>
                                </div>
                                <div class="absolute flex flex-col right-0 bottom-0">
                                    <button class="group px-1 text-center text-sm font-semibold text-gray-400" title="Custom Remarks">
                                        <!-- DEFAULT CUSTOM REMARKS ICON (OUTLINE) -->
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 group-hover:hidden">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                                        </svg>
                                        <!-- HOVERED CUSTOM REMARKS ICON (SOLID) -->
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 hidden group-hover:block">
                                            <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z" />
                                            <path d="M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z" />
                                        </svg>                                                                              
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3" x-bind:class="i == 1 ? '' : 'hidden'">
                            <label for="remarks" class="block text-sm font-medium text-gray-700">
                                Custom Remarks
                            </label>
                            <div class="mt-1">
                                <textarea id="remarks" name="remarks" maxlength="255" rows="3" class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md"></textarea>
                            </div>
                            <p class="text-xs text-gray-500">
                                Specify remarks for your response
                            </p>
                        </div>
                    </li>
                </template>
            </ul>
        </div>
        <div class="border-1 p-1 text-xs text-right text-gray-500">
            Total items selected: 3
        </div>
        <div class="border-1 p-1">
            <div>
                <label for="remarks" class="block text-sm font-medium text-gray-700">
                  General Remarks
                </label>
                <div class="mt-1">
                  <textarea id="remarks" name="remarks" maxlength="255" rows="3" class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border border-gray-300 rounded-md"></textarea>
                </div>
                <p class="text-xs text-gray-500">
                  Specify remarks for your response
                </p>
            </div>
        </div>
        <div class="border-1 p-1">
            <button class="bg-[#FF5800] w-full hover:bg-[#FF4300] text-white font-bold py-2 px-4 rounded">
                Approve
            </button>
        </div>
    </div>
</div>

<!-- VIEW REQUEST DETAILS MODAL -->
<div class="relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!--
      Background backdrop, show/hide based on modal state.
  
      Entering: "ease-out duration-300"
        From: "opacity-0"
        To: "opacity-100"
      Leaving: "ease-in duration-200"
        From: "opacity-100"
        To: "opacity-0"
    -->
    <div class="fixed inset-0 bg-gray-500/75 transition-opacity" aria-hidden="true"></div>
  
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full justify-center text-center items-center">
        <!--
          Modal panel, show/hide based on modal state.
  
          Entering: "ease-out duration-300"
            From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
            To: "opacity-100 translate-y-0 sm:scale-100"
          Leaving: "ease-in duration-200"
            From: "opacity-100 translate-y-0 sm:scale-100"
            To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        -->
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all w-full max-w-xl px-5 pt-5">
            <div class="group absolute right-5 top-5">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400 group-hover:text-gray-500 group-hover:w-6 group-hover:h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                </svg>
            </div>
            <div class="text-left">
            <h3 class="text-base font-semibold text-gray-900 border-b pb-3" id="modal-title">Request Details</h3>
            <div class="mt-2">
                <div class="flex items-center justify-between">
                    <div class="grow">
                        <div class="items-center justify-between">
                            <p class="text-sm font-medium text-gray-800 truncate">New GitHub Copilot License Request</p>
                        </div>
                        <div class="grid grid-flow-row grid-cols-2 grid-rows-2 text-sm text-gray-500">
                            <div><p class="truncate">Application: GH Management Tool</p></div>
                            <div class="pl-3"><p class="truncate">Module: GitHubCopilot</p></div>
                            <div><p class="truncate">Request by: juan.dela.cruz@email.com</p></div>
                            <div class="pl-3"><p class="truncate">Requested on Dec 12, 2012, 12:12 PM</p></div>
                            <div class="col-span-2" title="juan.dela.cruz@email.com, uncle.sam@email.com"><p class="truncate">Approvers: juan.dela.cruz@email.com, uncle.sam@email.com</p></div>
                        </div>
                        <!-- REQUEST EMAIL DETAILS -->
                        <div class="text-sm mt-3">
                            <style>
                                table,
                                th,
                                tr,
                                td {
                                    border: 0;
                                    border-collapse: collapse;
                                    vertical-align: middle;
                                }
                        
                                .thead {
                                    padding: 15px;
                                }
                        
                                .center-table {
                                    text-align: -webkit-center;
                                }
                        
                                .margin-auto {
                                    margin: auto;
                                }
                        
                                .border-top {
                                    border-top: 1px rgb(204, 204, 204) solid;
                                    border-collapse: separate;
                                }
                            </style>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <th class="center-table">
                                            <table style="width: 100%; max-width: 700px;" class="margin-auto">
                                                <tbody>
                                                    <tr style="background-color: #ff5800">
                                                        <td class="thead" style="width: 95px">
                                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-white">
                                                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z" />
                                                            </svg>
                                                        </td>
                                                        <td class="thead" style="
                                                                            font-family: SegoeUI, sans-serif;
                                                                            font-size: 14px;
                                                                            color: white;
                                                                            padding-bottom: 10px;
                                                                            ">
                                                            Community
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="center-table">
                                            <table style="width: 100%; max-width: 700px;" class="margin-auto">
                                                <tbody>
                                                    <tr>
                                                        <td style="font-size: 18px; font-weight: 600; padding-top: 20px">
                                                            Request for a GitHub Enterprise Organization
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th class="center-table">
                                            <table style="width: 100%; max-width: 700px; margin: auto">
                                                <tbody>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            Region
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            silicon-group-valley
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            Client Name
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            Sboj Evets 
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            Project Name
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            Mansanas
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            WBS
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            MBP16M3
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            Requested By
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            juan.dela.cruz@email.com
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            GitHub Id
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            123456789
                                                        </td>
                                                    </tr>
                                                    <tr class="border-top">
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 600;">
                                                            GitHub Username
                                                        </td>
                                                        <td style="font-size: 14px; padding-top: 15px; font-weight: 400;">
                                                            juandelacruz
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td class="center-table" align="center">
                                            <table style="width: 100%; max-width: 700px;" class="margin-auto">
                                                <tbody>
                                                    <tr>
                                                        <td style="padding-top: 20px">
                                                            Note: Before you approve the request, you'll have to manually create the
                                                            organization and add the requestor as an organization owner.
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <br>
                        </div>
                    </div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
</div>

<script type="text/javascript">
    const multipleApprovals = () => {
        const defaultState = {
            pendingRequests: {
                requestTypes: [],
                organizations: [],
                filter: {
                    requestType: '',
                    organization: '',
                },
                isSelectedAll: false,
                requests: [], // Array of pending request
                total: 0, // Total number of pending request by filter
                isInitLoading: false,
                isViewMoreLoading: false,
            },
            selectedRequests: {
                items: [
                    // { customRemarks: '', hasCustomRemarks: false, request: {} }
                ], // Array of selected request, custom remarks string, hasCustomRemarks boolean
                generalRemarks: '', // General remarks string
                total: 0 // Total number of selected request
            },
            requestDetailsModal: {
                isShow: false,
                request: {
                    subject: "",
                    application: "",
                    module: "",
                    requestedBy: "",
                    requestedOn: "",
                    approvers: [],
                    bodyHTML: "",
                },
            }
        }
        return {
            pendingRequests: {
                requestTypes: defaultState.pendingRequests.requestTypes,
                organizations: defaultState.pendingRequests.organizations,
                filter: {
                    requestType: defaultState.pendingRequests.filter.requestType,
                    organization: defaultState.pendingRequests.filter.organization,
                },
                isSelectedAll: defaultState.pendingRequests.isSelectedAll,
                requests: defaultState.pendingRequests.requests,
                total: defaultState.pendingRequests.total,
                isInitLoading: defaultState.pendingRequests.isInitLoading,
                isViewMoreLoading: defaultState.pendingRequests.isViewMoreLoading,
            },
            selectedRequests: {
                items: defaultState.selectedRequests.items,
                generalRemarks: defaultState.selectedRequests.generalRemarks,
                total: defaultState.selectedRequests.total
            },
            async init() {
                // Fetch request types
                // Fetch organizations
                // Fetch pending requests
            },
            async fetchPendingRequests() {
                // Fetch pending requests
            },
            async fetchRequestTypes() {
                // Fetch request types
            },
            async fetchOrganizations() {
                // Fetch organizations
            },

            // Pending Requests Section
            onSelectRequestType() {
                // Filter pending requests by request type
            },
            onSelectOrganization() {
                // Filter pending requests by organization
            },
            onToggleSelectAllPendingRequests() {
                // Select/Unselect all pending requests
            },
            onClickRowPendingRequest() {
                // Show request details modal
            },
            onClickViewMore() {
                // Fetch more pending requests
            },
            onToggleSelectPendingRequest() {
                // Select/Unselect pending request
            },

            // Request Details Modal Section
            onModalOpen(subject, application, module, requestedBy, requestedOn, approvers, bodyHTML) {
                // Open request details modal
                this.requestDetailsModal.request.subject = subject
                this.requestDetailsModal.request.application = application
                this.requestDetailsModal.request.module = module
                this.requestDetailsModal.request.requestedBy = requestedBy
                this.requestDetailsModal.request.requestedOn = requestedOn
                this.requestDetailsModal.request.approvers = approvers
                this.requestDetailsModal.request.bodyHTML = bodyHTML

                this.requestDetailsModal.isShow = true
            },
            onModalClose() {
                // Close request details modal
                this.requestDetailsModal.request.subject = defaultState.requestDetailsModal.request.subject
                this.requestDetailsModal.request.application = defaultState.requestDetailsModal.request.application
                this.requestDetailsModal.request.module = defaultState.requestDetailsModal.request.module
                this.requestDetailsModal.request.requestedBy = defaultState.requestDetailsModal.request.requestedBy
                this.requestDetailsModal.request.requestedOn = defaultState.requestDetailsModal.request.requestedOn
                this.requestDetailsModal.request.approvers = defaultState.requestDetailsModal.request.approvers
                this.requestDetailsModal.request.bodyHTML = defaultState.requestDetailsModal.request.bodyHTML

                this.requestDetailsModal.isShow = false
            },

            // Selected Requests Section
            onClickRowSelectedRequest() {
                // Show request details modal
            },
            onToggleCustomRemarks() {
                // Toggle custom remarks
            },
            onRemoveSelectedRequest() {
                // Remove selected request
            },
            async onSubmit() {
                // Submit selected requests
            },
        }
    }
</script>
{{ end }}